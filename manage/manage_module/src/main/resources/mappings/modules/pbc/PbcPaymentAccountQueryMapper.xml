<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.heepay.manage.modules.pbc.dao.PbcPaymentAccountQueryDao" >
  
  <sql id="includeEntity">
	  payment_account_id, data_type, data, 
      subject_type, account_owner_name, account_owner_id_type, 
      application_code
	</sql>
	
	<select id="findList" resultType="PbcPaymentAccountQuery">
		SELECT 
			<include refid="includeEntity"/>
		FROM pbc_payment_account_query
		<where>
			<!--subjectType -->
			<if test="subjectType != null and subjectType != ''">
				AND subject_type = #{subjectType} 
			</if> 
			<!--applicationCode -->
			<if test="applicationCode != null and applicationCode != ''">
				AND application_code = #{applicationCode} 
			</if> 
			<!-- accountOwnerIdType-->
			<if test="accountOwnerIdType != null and accountOwnerIdType != ''">
				AND account_owner_id_type = #{accountOwnerIdType} 
			</if> 
			</where> 
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY payment_accoun_id DESC,${page.orderBy}
			</when>
			<otherwise>
				ORDER BY payment_accoun_id DESC
			</otherwise>
		</choose>
	</select>
	
	
  <insert id="save" parameterType="PbcPaymentAccountQuery" >
   insert into pbc_payment_account_query (payment_account_id, data_type, data, 
      subject_type, account_owner_name, account_owner_id_type, 
      application_code)
    values (#{paymentAccountId,jdbcType=BIGINT}, #{dataType,jdbcType=VARCHAR}, #{data,jdbcType=VARCHAR}, 
      #{subjectType,jdbcType=VARCHAR}, #{accountOwnerName,jdbcType=VARCHAR}, #{accountOwnerIdType,jdbcType=VARCHAR}, 
      #{applicationCode,jdbcType=VARCHAR})
  </insert>
  <insert id="saveEntity" parameterType="PbcPaymentAccountQuery" useGeneratedKeys="true" keyProperty="paymentAccounId">
     insert into pbc_payment_account_query
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="paymentAccountId != null" >
        payment_account_id,
      </if>
      <if test="dataType != null" >
        data_type,
      </if>
      <if test="data != null" >
        data,
      </if>
      <if test="subjectType != null" >
        subject_type,
      </if>
      <if test="accountOwnerName != null" >
        account_owner_name,
      </if>
      <if test="accountOwnerIdType != null" >
        account_owner_id_type,
      </if>
      <if test="applicationCode != null" >
        application_code,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="paymentAccountId != null" >
        #{paymentAccountId,jdbcType=BIGINT},
      </if>
      <if test="dataType != null" >
        #{dataType,jdbcType=VARCHAR},
      </if>
      <if test="data != null" >
        #{data,jdbcType=VARCHAR},
      </if>
      <if test="subjectType != null" >
        #{subjectType,jdbcType=VARCHAR},
      </if>
      <if test="accountOwnerName != null" >
        #{accountOwnerName,jdbcType=VARCHAR},
      </if>
      <if test="accountOwnerIdType != null" >
        #{accountOwnerIdType,jdbcType=VARCHAR},
      </if>
      <if test="applicationCode != null" >
        #{applicationCode,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
 
  <update id="updateEntity" parameterType="PbcPaymentAccountQuery" >
    update pbc_payment_account_query
    <set >
      <if test="dataType != null" >
        data_type = #{dataType,jdbcType=VARCHAR},
      </if>
      <if test="data != null" >
        data = #{data,jdbcType=VARCHAR},
      </if>
      <if test="subjectType != null" >
        subject_type = #{subjectType,jdbcType=VARCHAR},
      </if>
      <if test="accountOwnerName != null" >
        account_owner_name = #{accountOwnerName,jdbcType=VARCHAR},
      </if>
      <if test="accountOwnerIdType != null" >
        account_owner_id_type = #{accountOwnerIdType,jdbcType=VARCHAR},
      </if>
      <if test="applicationCode != null" >
        application_code = #{applicationCode,jdbcType=VARCHAR},
      </if>
    </set>
    where payment_account_id = #{paymentAccountId,jdbcType=BIGINT}
  </update>
  
  <update id="update" parameterType="PbcPaymentAccountQuery" >
    update pbc_payment_account_query
    set data_type = #{dataType,jdbcType=VARCHAR},
      data = #{data,jdbcType=VARCHAR},
      subject_type = #{subjectType,jdbcType=VARCHAR},
      account_owner_name = #{accountOwnerName,jdbcType=VARCHAR},
      account_owner_id_type = #{accountOwnerIdType,jdbcType=VARCHAR},
      application_code = #{applicationCode,jdbcType=VARCHAR}
    where payment_account_id = #{paymentAccountId,jdbcType=BIGINT}
  </update>
  <select id="getEntityById" resultType="PbcPaymentAccountQuery">
  	SELECT 
			<include refid="includeEntity"/>
		FROM pbc_payment_account_query a
	WHERE payment_accoun_id = #{paymentAccounId}
  </select>
  
  <select id="getQueryInfoId" resultType="PbcPaymentAccountQuery">
  	SELECT 
			<include refid="includeEntity"/>
		FROM pbc_payment_account_query a
	WHERE application_code = #{applicationCode}
  </select>
</mapper>