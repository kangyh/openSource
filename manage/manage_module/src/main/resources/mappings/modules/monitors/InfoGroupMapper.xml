<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.heepay.manage.modules.monitors.dao.InfoGroupDao" >
  
  <sql id="includeEntity" >
    group_id, 
    group_code, 
    group_name, 
    create_user, 
    create_time, 
    update_user, 
    update_time, 
    remark, 
    status
  </sql>
  
  
  <select id="findList" resultType="InfoGroup">
		SELECT 
			<include refid="includeEntity"/>
		FROM info_group
		<where>
			<!-- 创建时间 -->
			<if test="beginOperEndTime != null and endOperEndTime != null">
				AND create_time BETWEEN date_format(#{beginOperEndTime},'%Y-%m-%d %H:%i:%s') AND date_format(#{endOperEndTime},'%Y-%m-%d %H:%i:%s')
			</if>
			<!-- groupName -->
			<if test="groupName != null and groupName != ''">
				AND group_name = #{groupName}
			</if>
			<!-- groupCode -->
			<if test="groupCode != null and groupCode != ''">
				AND group_code = #{groupCode}
			</if>
			<!-- status -->
			<if test="status != null and status != ''">
				AND status = #{status}
			</if>
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY group_id DESC,${page.orderBy}
			</when>
			<otherwise>
				ORDER BY group_id DESC
			</otherwise>
		</choose>
	</select>
	
  <select id="getEntity" resultType="InfoGroup" parameterType="java.lang.Integer" >
    select 
    <include refid="includeEntity" />
    from info_group
    where group_id = #{groupId,jdbcType=INTEGER}
  </select>
  
  <delete id="deleteEntity" parameterType="java.lang.Integer" >
    delete from info_group
    where group_id = #{groupId,jdbcType=INTEGER}
  </delete>
 
  <insert id="saveEntity" parameterType="InfoGroup" >
    insert into info_group
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="groupId != null" >
        group_id,
      </if>
      <if test="groupCode != null" >
        group_code,
      </if>
      <if test="groupName != null" >
        group_name,
      </if>
      <if test="createUser != null" >
        create_user,
      </if>
      <if test="createTime != null" >
        create_time,
      </if>
      <if test="updateUser != null" >
        update_user,
      </if>
      <if test="updateTime != null" >
        update_time,
      </if>
      <if test="remark != null" >
        remark,
      </if>
      <if test="status != null" >
        status,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="groupId != null" >
        #{groupId,jdbcType=INTEGER},
      </if>
      <if test="groupCode != null" >
        #{groupCode,jdbcType=VARCHAR},
      </if>
      <if test="groupName != null" >
        #{groupName,jdbcType=VARCHAR},
      </if>
      <if test="createUser != null" >
        #{createUser,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null" >
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateUser != null" >
        #{updateUser,jdbcType=VARCHAR},
      </if>
      <if test="updateTime != null" >
        #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="remark != null" >
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        #{status,jdbcType=CHAR},
      </if>
    </trim>
  </insert>
  
 
 
  <update id="updateEntity" parameterType="InfoGroup" >
    update info_group
    <set >
      <if test="groupCode != null" >
        group_code = #{groupCode,jdbcType=VARCHAR},
      </if>
      <if test="groupName != null" >
        group_name = #{groupName,jdbcType=VARCHAR},
      </if>
      <if test="createUser != null" >
        create_user = #{createUser,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null" >
        create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateUser != null" >
        update_user = #{updateUser,jdbcType=VARCHAR},
      </if>
      <if test="updateTime != null" >
        update_time = #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="remark != null" >
        remark = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        status = #{status,jdbcType=CHAR},
      </if>
    </set>
    where group_id = #{groupId,jdbcType=INTEGER}
  </update>
  
  <update id="entity" parameterType="InfoGroup" >
    update info_group
    set group_code = #{groupCode,jdbcType=VARCHAR},
      group_name = #{groupName,jdbcType=VARCHAR},
      create_user = #{createUser,jdbcType=VARCHAR},
      create_time = #{createTime,jdbcType=TIMESTAMP},
      update_user = #{updateUser,jdbcType=VARCHAR},
      update_time = #{updateTime,jdbcType=TIMESTAMP},
      remark = #{remark,jdbcType=VARCHAR},
      status = #{status,jdbcType=CHAR}
    where group_id = #{groupId,jdbcType=INTEGER}
  </update>
  
  <select id="getList" resultType="InfoGroup" parameterType="InfoGroup" >
  	SELECT 
			<include refid="includeEntity"/>
		FROM info_group
	<where>
		<!-- groupName -->
		<if test="groupName != null and groupName != ''">
			AND group_name = #{groupName}
		</if>
		<!-- groupCode -->
		<if test="groupCode != null and groupCode != ''">
			AND group_code = #{groupCode}
		</if>
		<!-- status -->
		<if test="status != null and status != ''">
			AND status = #{status}
		</if>
	</where>
  </select>
  
  <select id="countNum" parameterType="java.lang.String" resultType="java.lang.Integer">
  	SELECT COUNT(1) FROM info_group WHERE group_code=#{groupCode}
  </select>
  
</mapper>