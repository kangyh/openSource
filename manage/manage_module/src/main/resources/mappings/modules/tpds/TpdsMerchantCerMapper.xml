<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.heepay.manage.modules.tpds.dao.TpdsMerchantCerDao" >

  <sql id="includeEntity" >
    tpds_merchant_cer_id, 
    merchant_no, 
    pub_key, 
    pri_key, 
    cer_path, 
    create_time, 
    update_time, 
    update_user, 
    note
  </sql>
  <select id="findList" resultType="TpdsMerchantCer">
		SELECT 
			<include refid="includeEntity"/>
		FROM tpds_merchant_cer
		<where>
			<!-- 创建时间 -->
			<if test="beginOperEndTime != null and endOperEndTime != null">
				AND create_time BETWEEN date_format(#{beginOperEndTime},'%Y-%m-%d %H:%i:%s') AND date_format(#{endOperEndTime},'%Y-%m-%d %H:%i:%s')
			</if>
			
			<!-- 商户编码-->
			<if test="merchantNo != null and merchantNo != ''">
				AND merchant_no = #{merchantNo} 
			</if> 
			
			<!-- 商户公司名称 -->
			<if test="pubKey != null and pubKey != ''">
				AND pub_key = #{pubKey} 
			</if> 
			
		</where> 
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY tpds_merchant_cer_id DESC,${page.orderBy}
			</when>
			<otherwise>
				ORDER BY tpds_merchant_cer_id DESC
			</otherwise>
		</choose>
	</select>
	
	
	<insert id="saveEntity" parameterType="TpdsMerchantCer" >
    insert into tpds_merchant_cer
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="tpdsMerchantCerId != null" >
        tpds_merchant_cer_id,
      </if>
      <if test="merchantNo != null" >
        merchant_no,
      </if>
      <if test="pubKey != null" >
        pub_key,
      </if>
      <if test="priKey != null" >
        pri_key,
      </if>
      <if test="cerPath != null" >
        cer_path,
      </if>
      <if test="createTime != null" >
        create_time,
      </if>
      <if test="updateTime != null" >
        update_time,
      </if>
      <if test="updateUser != null" >
        update_user,
      </if>
      <if test="note != null" >
        note,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="tpdsMerchantCerId != null" >
        #{tpdsMerchantCerId,jdbcType=INTEGER},
      </if>
      <if test="merchantNo != null" >
        #{merchantNo,jdbcType=VARCHAR},
      </if>
      <if test="pubKey != null" >
        #{pubKey,jdbcType=VARCHAR},
      </if>
      <if test="priKey != null" >
        #{priKey,jdbcType=VARCHAR},
      </if>
      <if test="cerPath != null" >
        #{cerPath,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null" >
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateTime != null" >
        #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateUser != null" >
        #{updateUser,jdbcType=VARCHAR},
      </if>
      <if test="note != null" >
        #{note,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  
  <update id="updateEntity" parameterType="TpdsMerchantCer" >
    update tpds_merchant_cer
    <set >
      <if test="merchantNo != null" >
        merchant_no = #{merchantNo,jdbcType=VARCHAR},
      </if>
      <if test="pubKey != null" >
        pub_key = #{pubKey,jdbcType=VARCHAR},
      </if>
      <if test="priKey != null" >
        pri_key = #{priKey,jdbcType=VARCHAR},
      </if>
      <if test="cerPath != null" >
        cer_path = #{cerPath,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null" >
        create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateTime != null" >
        update_time = #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateUser != null" >
        update_user = #{updateUser,jdbcType=VARCHAR},
      </if>
      <if test="note != null" >
        note = #{note,jdbcType=VARCHAR},
      </if>
    </set>
    where tpds_merchant_cer_id = #{tpdsMerchantCerId,jdbcType=INTEGER}
  </update>
  
  <select id="getEntityById"  resultType="TpdsMerchantCer">
     select 
    <include refid="includeEntity" />
    from tpds_merchant_cer
    where tpds_merchant_cer_id = #{tpdsMerchantCerId,jdbcType=INTEGER}
  </select>
  
  
   <select id="changeValue"  resultType="java.lang.Integer">
	select 
	  count(1) 
	from
	  tpds_merchant_cer where merchant_no=#{merchantNo};
  </select>
  
  <delete id="deleteEntity">
  	DELETE FROM  tpds_merchant_cer WHERE  tpds_merchant_cer_id = #{tpdsMerchantCerId}
  </delete>
  
  
</mapper>