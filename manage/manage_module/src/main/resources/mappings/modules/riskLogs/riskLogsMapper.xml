<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.heepay.manage.modules.riskLogs.dao.RiskLogsDao" >
 
 
  <sql id="includeEntity">
	  log_id, 
	  operation_type, 
	  user_id, 
      ip, 
      update_user, 
      update_time, 
      remark
  </sql>
  
  <select id="findList" resultType="riskLogs">
		SELECT 
			<include refid="includeEntity"/>
		FROM risk_logs
		<where>
			<!-- update_time -->
			<if test="beginOperEndTime != null and endOperEndTime != null">
				AND update_time BETWEEN date_format(#{beginOperEndTime},'%Y-%m-%d %H:%i:%s') AND date_format(#{endOperEndTime},'%Y-%m-%d %H:%i:%s')
			</if>
			<!-- operationType-->
			<if test="operationType != null and operationType != ''">
				AND operation_type = #{operationType}
			</if>
			<!-- userId  -->
			<if test="userId != null and userId != ''">
				AND user_id = #{userId}
			</if>
			<!-- ip  -->
			<if test="ip != null and ip != ''">
				AND ip = #{ip}
			</if>
			
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY log_id DESC,${page.orderBy}
			</when>
			<otherwise>
				ORDER BY log_id desc
			</otherwise>
		</choose>
	</select>
  
  <insert id="saveEntity" parameterType="riskLogs" >
    insert into risk_logs
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="logId != null" >
        log_id,
      </if>
      <if test="operationType != null" >
        operation_type,
      </if>
      <if test="userId != null" >
        user_id,
      </if>
      <if test="ip != null" >
        ip,
      </if>
      <if test="updateUser != null" >
        update_user,
      </if>
      <if test="updateTime != null" >
        update_time,
      </if>
      <if test="remark != null" >
        remark,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="logId != null" >
        #{logId,jdbcType=INTEGER},
      </if>
      <if test="operationType != null" >
        #{operationType,jdbcType=VARCHAR},
      </if>
      <if test="userId != null" >
        #{userId,jdbcType=VARCHAR},
      </if>
      <if test="ip != null" >
        #{ip,jdbcType=VARCHAR},
      </if>
      <if test="updateUser != null" >
        #{updateUser,jdbcType=VARCHAR},
      </if>
      <if test="updateTime != null" >
        #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="remark != null" >
        #{remark,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  
</mapper>